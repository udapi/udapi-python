#!/usr/bin/env python3

import logging
import argparse

from udapi.core.run import Run

# Parse command line arguments.
argparser = argparse.ArgumentParser(description='udapy - Python interface to Udapi - API for Universal Dependencies')
argparser.add_argument("-q", "--quiet", action="store_true",
                       help="Warning, info and debug messages are suppressed. Only fatal errors are reported.")
argparser.add_argument("-v", "--verbose", action="store_true",
                       help="Warning, info and debug messages are printed to the STDERR.")
argparser.add_argument("-s", "--save", action="store_true",
                       help="Add write.Conllu to the end of the scenario")
argparser.add_argument('scenario', nargs=argparse.REMAINDER, help="A sequence of blocks and their parameters.")

args = argparser.parse_args()

# Set the level of logs according to parameters.
if args.verbose:
    level = logging.DEBUG
elif args.quiet:
    level = logging.CRITICAL
else:
    level = logging.INFO

logging.basicConfig(format='%(asctime)-15s [%(levelname)7s] %(funcName)s - %(message)s', level=level)

# Process and provide the scenario.
if __name__ == "__main__":
    if args.save:
        args.scenario = args.scenario + ['write.Conllu']
    runner = Run(args)
    runner.execute()
